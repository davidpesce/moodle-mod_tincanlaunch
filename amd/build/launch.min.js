define ("mod_tincanlaunch/launch",["jquery","core/str"],function(a,b){var c={ATTEMPT_PROGRESS:"#tincanlaunch_attemptprogress",ATTEMPT_TABLE:"#tincanlaunch_attempttable",COMPLETION_CHECK:"#tincanlaunch_completioncheck",EXIT:"#tincanlaunch_exit",LAUNCH_FORM:"#launchform",MAINCONTENT:"#maincontent",NEW_ATTEMPT:"#tincanlaunch_newattempt",NEW_ATTEMPT_LINK:"[id^=tincanlaunch_newattemptlink-]",REATTEMPT:"[id^=tincanrelaunch_attempt-]",REGISTRATION:"#launchform_registration",STATUS:"#tincanlaunch_status",STATUSPARA:"#tincanlaunch_status_para"};return{init:function init(){var b=this,d=new URLSearchParams(window.location.search);b.id=d.get("id");b.n=d.get("n");a(c.REATTEMPT).each(function(){var c=a(this).attr("id").substring(23);a(this).keyup(function(a){b.keyTest(a.keyCode,c)});a(this).click(function(){b.launchExperience(c)});a(this).attr("tabindex","0");a(this).attr("style","cursor: pointer")});var f=a(c.NEW_ATTEMPT_LINK).attr("id").substring(28);a(c.NEW_ATTEMPT_LINK).attr("tabindex","0");a(c.NEW_ATTEMPT_LINK).attr("style","cursor: pointer");a(c.NEW_ATTEMPT_LINK).click(function(){b.launchExperience(f)});a(c.NEW_ATTEMPT_LINK).keyup(function(a){b.keyTest(a.keyCode,f)});setInterval(function(){a(c.COMPLETION_CHECK).load("completion_check.php?id=&n="+"")},3e4)},keyTest:function keyTest(a,b){var c=this;if(13===a||32===a){c.launchExperience(b)}},launchExperience:function launchExperience(d){var e=this;a(c.REGISTRATION).val(d);a(c.LAUNCH_FORM).submit();a(c.NEW_ATTEMPT).remove();a(c.ATTEMPT_TABLE).remove();b.get_strings([{key:"tincanlaunch_progress",component:"tincanlaunch"},{key:"returntocourse",component:"tincanlaunch"}]).done(function(b){a(c.STATUSPARA).text(b[0]);var d=a("<p>").attr("id",c.EXIT);d.html("<a href='complete.php?id="+e.id+"&n="+e.n+"'>"+b[1]+"</a>");a(c.STATUSPARA).after(d)})}}});
//# sourceMappingURL=launch.min.js.map
