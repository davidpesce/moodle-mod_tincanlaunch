define ("mod_tincanlaunch/launch",["jquery","core/str"],function(a,b){var c="",d="",e={ATTEMPT_PROGRESS:"#tincanlaunch_attemptprogress",ATTEMPT_TABLE:"#tincanlaunch_attempttable",COMPLETION_CHECK:"#tincanlaunch_completioncheck",EXIT:"#tincanlaunch_exit",LAUNCH_FORM:"#launchform",MAINCONTENT:"#maincontent",NEW_ATTEMPT:"#tincanlaunch_newattempt",NEW_ATTEMPT_LINK:"[id^=tincanlaunch_newattemptlink-]",REATTEMPT:"[id^=tincanrelaunch_attempt-]",REGISTRATION:"#launchform_registration",STATUSDIV:"#tincanlaunch_status",STATUSPARA:"#tincanlaunch_status_para"};return{init:function init(){var b=this,f=new URLSearchParams(window.location.search);c=f.get("id");d=f.get("n");a(e.REATTEMPT).each(function(){var c=a(this).attr("id").substring(23);a(this).keyup(function(a){b.keyTest(a.keyCode,c)});a(this).click(function(){b.launchExperience(c)});a(this).attr("tabindex","0");a(this).attr("style","cursor: pointer")});var g=a(e.NEW_ATTEMPT_LINK).attr("id").substring(28);a(e.NEW_ATTEMPT_LINK).attr("tabindex","0");a(e.NEW_ATTEMPT_LINK).attr("style","cursor: pointer");a(e.NEW_ATTEMPT_LINK).click(function(){b.launchExperience(g)});a(e.NEW_ATTEMPT_LINK).keyup(function(a){b.keyTest(a.keyCode,g)});var h=a("<p></p>").attr("id","tincanlaunch_status_para"),i=a("<span>").attr("id","tincanlaunch_completioncheck");a(e.STATUSDIV).append(h,i);setInterval(function(){a(e.COMPLETION_CHECK).load("completion_check.php?id="+c+"&n="+d)},3e4)},keyTest:function keyTest(a,b){var c=this;if(13===a||32===a){c.launchExperience(b)}},launchExperience:function launchExperience(f){a(e.REGISTRATION).val(f);a(e.LAUNCH_FORM).submit();a(e.NEW_ATTEMPT).remove();a(e.ATTEMPT_TABLE).remove();b.get_strings([{key:"tincanlaunch_progress",component:"tincanlaunch"},{key:"returntocourse",component:"tincanlaunch"}]).done(function(b){a(e.STATUSPARA).text(b[0]);var f=a("<p></p>").attr("id",e.EXIT);f.html("<a href='complete.php?id="+c+"&n="+d+"'>"+b[1]+"</a>");a(e.STATUSPARA).after(f)})}}});
//# sourceMappingURL=launch.min.js.map
